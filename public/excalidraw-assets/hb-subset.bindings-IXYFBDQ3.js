import{a}from"./chunk-M2JW2GFW.js";import"./chunk-SXMPUQ6M.js";a();function s(e,f,i,u){let r=e.hb_subset_input_create_or_fail();if(r===0)throw new Error("hb_subset_input_create_or_fail (harfbuzz) returned zero, indicating failure");let t=e.malloc(i.byteLength);f.set(new Uint8Array(i),t);let c=e.hb_blob_create(t,i.byteLength,2,0,0),o=e.hb_face_create(c,0);e.hb_blob_destroy(c);let l=e.hb_subset_input_set(r,6);e.hb_set_clear(l),e.hb_set_invert(l);let b=e.hb_subset_input_unicode_set(r);for(let h of u)e.hb_set_add(b,h);let _;try{if(_=e.hb_subset_or_fail(o,r),_===0)throw e.hb_face_destroy(o),e.free(t),new Error("hb_subset_or_fail (harfbuzz) returned zero, indicating failure. Maybe the input file is corrupted?")}finally{e.hb_subset_input_destroy(r)}let n=e.hb_face_reference_blob(_),y=e.hb_blob_get_data(n,0),d=e.hb_blob_get_length(n);if(d===0)throw e.hb_blob_destroy(n),e.hb_face_destroy(_),e.hb_face_destroy(o),e.free(t),new Error("Failed to create subset font, maybe the input file is corrupted?");let p=new Uint8Array(f.subarray(y,y+d));return e.hb_blob_destroy(n),e.hb_face_destroy(_),e.hb_face_destroy(o),e.free(t),p}var w={subset:s};export{w as default};
